% File name: u-cz-1sh.tex
% Date:      2009/10/28 12:37
% Author:    Jiri Brozovsky

\section{Základní orientace}

Po spu¹tìní programu se objeví dvì okna -- {\em grafické okno} s ovládacími
prvky a {\em okno výpisù}. {\em Grafické okno} slou¾í k samotné práci
u¾ivatele, zatímco okno výpisù obsahuje podrobnìj¹í textové informace o
probíhajících operacích, zejména chybová hlá¹ení.\\

{\bf Pozor:} {\em Okno výpisù nesmí být u¾ivatelem zavøeno, program by
okam¾itì a bez dal¹ích varování skonèil!}

\subsection{Grafické okno}

\begin{figure}[ht]
\begin{center}
\scalebox{1.1}{\includegraphics{uf.eps}}
\label{ufscheme}
\end{center}
\caption{Prvky {\em grafického okna} programu uFEM}
\end{figure}

\begin{enumerate}
\item {\em Nabídka aplikace}: obsahuje roletové nabídky zpøístupòující
práci se soubory (naèítání, ukládání), zobrazování a výpisy dat a
práci s výbìry polo¾ek.
\item {\em Strom pøíkazù}: obsahuje stromovì seøazené pøíkazy pro
tvorbu a úpravy dat, pro provádìní výpoètù a pro vyhodnocování
výsledkù.
\item {\em Informaèní pole}: obsahuje informaci o stavu programu a o
úspì¹ném ({\em OK}) nebo neúspì¹ném ({\tt Error}) ukonèení operace.
\item {\em Grafická oblast}: slou¾í k zobrazení grafických dat (var
modelu, výsledky,\dots).
\item {\em Potvrzovací tlaèítka}: slou¾í k ukonèení nebo pøeru¹ení 
práce s my¹í. Tato tlaèítka jsou aktivní jen bìhem operací výbìru
pomocí my¹i.
\item {\em Nastavení zobrazení}: slou¾í k rychlému nastavení
grafického zobrazení (pøekreslení, zvìt¹ení, zmen¹ení, pøesuny a
otáèení).
\item {\em Pøíkazový øádek}: umo¾òuje zadávat pøíkazy. Provádìní
zapsaného pøíkazu se zahájí stiskem klávesy {\tt Enter}.
\end{enumerate}


\subsection{Dal¹í dialogová okna}

Pøi práci se mohou objevit dal¹í dialogová okna, která slou¾í
k zadání po¾adovaných informací. Tato okna obvykle obsahují nìkolik
potvrzovacích tlaèítek:
\begin{itemize}
\item {\em OK}: provede zadanou operaci (ulo¾í nebo zpracuje vlo¾ená
data) a uzavøe  dialogové okno.
\item {\em Apply}: provede zadanou operaci (stejnì jako {\em tlaèítko OK}),
ale znovu zobrazí toté¾ dialogové pro zadání dal¹ích dat. Toto
tlaèítko nìkdy nemusí být k dispozici.
\item {\em Cancel} (Zru¹it): zru¹í operaci (nic se neprovede a zadaná
data se nikde nepou¾ijí).
\end{itemize}


\subsection{Okna s výpisy}

Výchozím nastavením programu je vypisování v¹ech textových informací
do {\em okna výpisù}. Program v¹ak mù¾e být nakonfigurován tak, aby k
provádìní u¾ivatelem vy¾ádaných výpisù pou¾il pøeddefinovaný program
(obvykle textový editor nebo prohlí¾eè souborù HTML). 

\section{Umístìní a pojmenování datových souborù}

\subsection{Jméno úlohy}

U¾ivatelské rozhraní programu uFEM pøi svém chodu vytváøí celou øadu
souborù. Názvy tìchto souborù jsou automaticky vytváøeny tak, aby na
zaèátku
obsahovaly u¾ivatelem definované {\em jméno úlohy} a na konci mìly
vhodnou pøíponu. 

Výchozí jméno úlohy je ,,{\tt femfile}`` a je mo¾né jej zmìnit v nabídce
{\tt File $\rightarrow$ Change~JobName} nebo pøíkazem {\tt jobname,jméno}


\subsection{Adresáø pro data}

V¹echny vý¹e uvedené soubory se ukládají do jednoho adresáøe (slo¾ky).
Poloha tohoto  adresáøe závisí na nastavení konkrétní instalace
programu a u¾ivatelem mù¾e být zmìnìna pomocí pøíkazu {\tt
datadir,adresáø}.\footnote{Adresáø musí být specifikován plnou cestou 
podle konvencí pou¾ívaného operaèního systému, napøíklad {\tt
datadir,C:/data} pro systémy Windows nebo {\tt datadir,/home/user/data} 
pro operaèní systémy unixového typu.}

\subsection{Typy souborù}

V tabulce~\ref{typysoub} jsou uvedeny základní typy souborù, které
jsou programem vyu¾ívány a vytváøeny. Pro archivaci práce postaèí
uchovávat soubory s koncovkou ,,{\tt db}``, v pøípadì potøeby zálohování
i výsledkù výpoètu navíc i soubory s koncovkou ,,{\tt res}``.

\begin{table}[ht]
\begin{center}
\begin{tabular}{|l||l|l|}
\hline
{\bf Typ souboru} & {\bf Pøípony} \\
\hline
\hline
Popis modelu & db \\
Textový výpis dat& txt, html \\
Soubor s pøíkazy & mac \\
Popis modelu pro øe¹iè & fem \\
Soubor s výsledky øe¹ení& res \\
\hline
\end{tabular}
\label{typysoub}
\end{center}
\caption{Základní typy souborù pou¾ívaných programem uFEM}
\end{table}


\section{Postup tvorby modelu}

Pøi sestavování výpoèetního modelu je potøeba dodr¾ovat poøadí
nìkterých krokù. Zejména je potøebné, aby byly nejprve definovány
pou¾ívané typy materiálù a typy a vlastnosti koneèných prvkù 
a a¾ poté mù¾e být zadávána geometrie modelu.

Poøadí potøebných krokù je následující:
\begin{enumerate}
\item Výbìr typù pou¾itých koneèných prvkù ({\em Element Type}).
\item Nastavení parametrù pou¾itých koneèných prvkù ({\em Real Constants}).
\item Nastavení a vlastností vlastností pou¾itých materiálù ({\em Materials}).
\item Zadání geometrie modelu ({\em Geometric Entities}).
\item Nastavení parametrù sítì koneèných prvkù.
\item Vytvoøení sítì koneèných prvkù ({\em Neshing}).
\item Zadání podpor a zatí¾ení ({\em Supports}, {\em Loads}).
\end{enumerate}

Je samozøejmì mo¾né zadat uzly koneèných prvkù a prvky samotné pøímo,
bez tvorby geometrie modelu (kroky 4-6). Tuto èást je také mo¾né
nahradit naètením sítì koneèných prvkù z externího souboru vytvoøeného
jiným programem.

\section{Úvodní pøíklad}

V následujících odstavcích je na jednoduché úloze ukázána tvorba
výpoèetního modelu jednoduché stìnové konstrukce.

\subsection{Pøíprava}

Proto¾e nastavení programu závisí na konkrétní instalaci a na zvycích
u¾ivatele, doporuèujeme pro dosa¾ení jednotného chování nastavit
následující polo¾ky (z nabídky aplikace):
\begin{itemize}
\item Automatické pøekreslování modelu: {Plot $\rightarrow$ Automatic replotting} 
\item Zobrazování bodù: {Plot $\rightarrow$ Automatic replotting} 
\item Zobrazování geometrických obejkù: {Plot $\rightarrow$ Automatic replotting} 
\end{itemize}



\subsection{Zadání pøíkladu}

Obdélníková stìna je z materiálu o modulu pru¾nosti $E = 20 GPa$ a o
Poissonovì souèiniteli $\nu = 0.2$, její tlou¹»ka je $t = 0.1 m$.
Stìna je po okrajích vetknuta a je zatí¾ena svislou osamìlou silou uprostøed
horní hrany podle~obrázku~\ref{obrp1}.

Stìnu rozdìlte na $200 = 20\times 10$ koneèných prvkù.

\begin{figure}[ht]
\begin{center}
\scalebox{1.0}{\includegraphics{u-cz-p1.eps}}
\label{obrp1}
\end{center}
\caption{Geometrie stìny}
\end{figure}

\subsection{Zadání vlastností modelu}

\subsubsection{Výbìr typu koneèného prvku}

Nejprve je tøeba vybrat vhodný typ koneèného prvku. Podle
tabulky~\ref{typykp} jím bude prvek {\bf PLANE2}. Dialog pro jeho výbìr
se vyvolá ze {\em Stromu pøíkazù}:\\ {\tt Preprocessor $\rightarrow$ Element Types $\rightarrow$ Add..}.

Do pole {\em Identifier} se uvádí u¾ivatelem zvolené èíselné oznaèení typu
prvku (pou¾ijte hodnotu $1$) a do pole {\em Type} jméno nebo èíslo
typu prvku (pou¾ijte {\tt plane2} nebo jen $2$).

\subsubsection{Zadání vlastností koneèného prvku}

Je tøeba zadat také tlou¹»ku stìny (která je v tomto pøíkladu
po celé stìnì konstantní). V {\em Stromu pøíkazù} se zadá\\
{\tt Preprocessor $\rightarrow$ Real Constants $\rightarrow$ Add} a v dialogu se do pole {\em Identifier} zadá u¾ivatelem
definované èíslo prvku (zadejte $1$) a do pole {\em Type} se uvede typ
koneèného prvku, pro který jsou konstanty platné (zde {\tt plane2}
nebo $2$).\footnote{Pro jeden typ koneèného prvku je samozøejmì mo¾né nadefinovat
více sad vlastností koneèných prvkù s odli¹nými èísly ({\em Identifier}), co¾
by se vyu¾ilo napøíklad v pøípadì stìny s promìnnou tlou¹»kou.} 

Dále je potøebné zadat hodnoty tìchto konstant.
 V {\em Stromu pøíkazù} se zadá\\
{\tt Preprocessor $\rightarrow$ Real Constants $\rightarrow$ Set Values} a v dialogu se vyplní
u¾ivatelské èíslo pøíslu¹né sady konstant (zde $1$, které bylo zvoleno
v pøedchozím kroku).

V následujícím dialogu se do pole {\em Height}
uvede hodnota tlou¹»ky (zde $0.1$).\\

{\bf Pozor:} {\em èíselné údaje se v¾dy zadávají s desetinnou teèkou.}

\subsubsection{Zadání typu a vlastností materiálu}

V {\em Stromu pøíkazù} se zadá\\
{\tt Preprocessor $\rightarrow$ Materials $\rightarrow$ Add} a v dialogu se do pole {\em Identifier}
zadá u¾ivatelem definované èíslo materiálu (zadejte $1$) a do pole {\em
Type} se uvede typ materiálu, pro který jsou konstanty platné (zde
{\tt hooke1} nebo $1$, jde o lineárnì pru¾ný izotropní materiál).

Dále je potøebné zadat hodnoty materiálových parametrù.
 V {\em Stromu pøíkazù} se zadá\\
{\tt Preprocessor $\rightarrow$ Materials $\rightarrow$ Set Values} a v dialogu se vyplní
u¾ivatelské èíslo pøíslu¹ného materiálu (zde $1$, které bylo zvoleno
v pøedchozím kroku).

V následujícím dialogu se do pole {\em ex}
uvede hodnota modulu pru¾nosti (zde $27e9$) a do pole {\em prxy}
velikost Poissonova souèinitele (zde $0.2$).\\

\subsection{Tvorba geometrie modelu}

\subsubsection{Body}

Nejprve je potøebné vytvoøit body, pomocí kterých budou následnì definovány
plochy.
Ve {\em Stromu pøíkazù} se zvolí\\
{\tt Preprocessor $\rightarrow$ Keypoints $\rightarrow$ Create/Change} a v následném dialogu
se vyplní èísla a souøadnice jednotlivých bodù a stisknout {\em OK}. 
Pøíslu¹né souøadnice jsou uvedeny v tabulce~\ref{tabp1kp}.

\begin{table}[ht]
\begin{center}
\begin{tabular}{|c||c|c|c|c|}
\hline
{\bf Bod} & {\bf X} &{\bf Y} & {\bf Z} \\
\hline
\hline
1 & 0 & 0 & 0 \\
2 & 2 & 0 & 0 \\
3 & 4 & 0 & 0 \\
4 & 0 & 2 & 0 \\
5 & 2 & 2 & 0 \\
6 & 4 & 2 & 0 \\
\hline
\end{tabular}
\label{tabp1kp}
\end{center}
\caption{Základní typy souborù pou¾ívaných programem uFEM}
\end{table}

Zadané body je mo¾né vykreslit pomocí nabídky {\em Plot $\rightarrow$ Keypoints}.


\subsubsection{Plochy}

Plochy je mo¾né vytvoøit oznaèením bodù my¹í. Tato funkce se spustí 
ze
{\em Stromu pøíkazù} volbou:\\
{\tt Preprocessor $\rightarrow$ Geometric Entities $\rightarrow$ Create by mouse..}. V následujícím
dialogu je tøeba nastavit typ tvoøeného obrazce ({\em Entity type}) na
{\em rectangle} (obdélník) a hodnoty ostatních parametrù ponechat $1$.
Jde o typ koneèného prvku ({\em Element Type}), 
èíslo sady konstant koneèného prvku ({\em Real Set}) a
èíslo materiálu ({\em Material}) definované u¾ivatelem -- tyto hodnoty byly v pøedchozích
krocích nastaveny právì na $1$.

Poté je tøeba oznaèit my¹í v¾dy ètyøi
vrcholy plochy a to {\bf ve smìru proti chodu hodinových ruèièek}.
První plocha tedy bude mít vrcholy (v uvedeném poøadí): $1, 2, 5, 4$
a druhá plocha bude mít vrcholy: $2, 3, 6, 5$.

Zadávání se ukonèí stiskem tlaèítka {\em Done} v  oblasti {\em
Potvrzovacích tlaèítek} (vlevo dole v grafickém oknì).

Zadané plochy je mo¾né vykreslit pomocí nabídky {\em Plot $\rightarrow$ Geometric Entities}.


\subsection{Parametry sítì koneèných prvkù}

V programu uFEM se hustota a parametry sítì koneèných prvkù nastavují
zadání poètu dílkù (dìlení) na hranách oblastí.\\

{\bf Poznámka:} {\em Program umo¾òuje pouze tvorbu pravidelných sítí
koneèných prvkù. Proto je tøeba dbát na to, aby vzájemnì protilehlé hrany mìly
v¾dy nastaven stejný poèet dílkù.} \\

V zadaném pøípadì mají být v¹echny hrany rozdìleny na $10$ dílky. To je
výchozí hodnota, kterou proto není tøeba mìnit.\footnote{V pøípadì
potøeby 
mo¾né to provést pomocí nabídky ze 
{\em Stromu pøíkazù}:
{\em Geometric Entities $\rightarrow$ Change Divisions by Mouse}.}


\subsection{Tvorba sítì koneèných prvkù}

Provede se ze
{\em Stromu pøíkazù} volbou:\\
{\tt Preprocessor $\rightarrow$ Meshing $\rightarrow$ Mesh}. Uvedená funkce nemá ¾ádné
nastavitelné parametry.

Pro vykreslení sítì koneèných prvkù bude vhodné skrýt geometrický
model pomocí polo¾ek v nabídce aplikace:\\
{\tt Hide $\rightarrow$ Geometric Entities}\\
{\tt Hide $\rightarrow$ Keypoints}

\subsection{Zadání podpor}

Podpory (a vìt¹inu zatí¾ení) je v programu mo¾né zadávat jen do uzlù
koneèných prvkù. Je mo¾né je zadat
 ze
{\em Stromu pøíkazù} volbou:\\
{\tt Preprocessor $\rightarrow$ Displacements $\rightarrow$ Create by Mouse..}.  V následném
dialogu se v polo¾ce {\em Type mod} uvede smìr aplikované podpory
({\em ux} pro podporu proti posunutí ve smìru $x$). 

Po stisku {\em OK}
je mo¾né my¹í vybrat pøíslu¹né uzly (celé øady uzlù na levém i pravém
okraji modelu). Uzly je mo¾né vybírat buï jednotlivì, a nebo pomocí
okna -- to se aktivuje pohybem  my¹i pøi stisknutém levém tlaèítku.

Celý postup je potøebné opakovat i pro podporu ve smìru $y$ ({\em uy}).

\subsection{Zadání zatí¾ení}

Zadanou bodovou sílu je mo¾né zadat ze
{\em Stromu pøíkazù} volbou:\\
{\tt Preprocessor $\rightarrow$ Nodal Loads $\rightarrow$ Create by Mouse..}. 
 V následném
dialogu se v polo¾ce {\em Type } uvede smìr zadávané síly
({\em fx} a v polo¾ce {\em Size} její velikost (zde $-10e3$).

\begin{figure}[ht]
\begin{center}
\scalebox{0.3}{\includegraphics{p1model.eps}}
\label{p1model}
\end{center}
\caption{Výpoèetní model pro úvodní pøíklad}
\end{figure}



\subsection{Výpoèet}

Provedení výpoètu se zahájí ze
{\em Stromu pøíkazù} volbou:\\
{\tt Solution $\rightarrow$ Solve current data}.
Výpoèet by mìl trvat velmi krátkou dobu a výsledek je 
oznámen v~{\em Informaèním poli}.\footnote{Pokud se
výpoèet nezdaøí, zkontrolujte si, prosím, nastavení a úplnost
instalace svého programu.
V této fázi se volá externí øe¹iè, který musí být pøítomen a správnì
nakonfigurován. Návod je uveden v dal¹ích èástech této pøíruèky.}

\subsection{Prohlí¾ení výsledkù}

Funkce pro prohlí¾ení výsledkù jsou pøístupné ve
{\em Stromu pøíkazù} v nabídkách:\\
{\tt Postprocessor $\rightarrow$ List Results} (textové výpisy)\\
{\tt Postprocessor $\rightarrow$ Plot Results} (grafické výstupy).

Napøíklad napìtí $\sigma_x$ je mo¾né vykreslit pomocí:\\
{\em Postprocessor $\rightarrow$ Plot Results $\rightarrow$ Element Solution..}
a výbìrem hodnoty {\tt sx} v polo¾ce {\em Type} následného dialogu.


\begin{figure}[ht]
\begin{center}
\scalebox{0.3}{\includegraphics{p1sx.eps}}
\label{p1sx}
\end{center}
\caption{Pøíklad výsledkù -- napìtí $\sigma_x$}
\end{figure}

\subsection{Ulo¾ení výsledkù}

\subsubsection{Textové výstupy}

Textové výstupy (vèetnì výpisù vybraných výsledkù) je mo¾né získat
pomocí {\em Stromu pøíkazù}:
{\tt Postprocessor $\rightarrow$ List Results}.

Tyto výsledky se otevøou v nastaveném programu (textový editor nebo
prohlí¾eè HTML souborù) a je mo¾né je ulo¾it pomocí funkcí tohoto
programu.\footnote{uFEM nejprve ulo¾í výstup do souboru v pracovním
adresáøi, který následnì otevøe v uvedeném programu. Proto jej ve
skuteènosti u¾ není tøeba ukládat. Øada u¾ivatelù ov¹em asi bude chtít
mít soubor uchován pod jiným jménem, ne¾ jsou výchozí názvy tìchto
souborù (obvykle nìco jako ,,femfile-out129.txt``)} 

\subsubsection{Grafické výstupy}

Grafické výstupy je mo¾né ulo¾it 
pomocí {\em Stromu pøíkazù} volbou:
{\tt Postprocessor $\rightarrow$ Save Graphics}.

V¾dy je k dispozici mo¾nost ulo¾ení aktuálního zobrazení v rastrovém formátu
PBM~\cite{netpbm}.\footnote{Autor uznává, ¾e zvolený formát mù¾e na
nìkteré u¾ivatele pùsobit ponìkud cizokrajnì. Nicménì vìt¹ina
serioznìj¹ích programù pro práci s obrázky ho dovede bez potí¾í
zpracovat nebo pøevést na formát jiný, u¾ivateli bli¾¹í.}

V rùzných instalacích programu uFEM mohou být k
dispozici i dal¹í formáty souborù (rastrový formát TIFF nebo vektorový
formát Encapsulated Postscript).

\section{Ukládání a naèítání dat}

\subsection{Ulo¾ení dat}

Sestavený model je mo¾né kdykoli v prùbìhu práce ulo¾it. Dialog pro
ulo¾ení souboru se vyvolá z nabídky aplikace:
{\tt File $\rightarrow$ Save to..}. 

\subsection{Naètení dat}

Data ze souboru je mo¾né naèíst
 pomocí nabídky aplikace:
{\em File $\rightarrow$ Resume from..}.  V¹echna pøedchozí data
se nahradí daty z naèítaného souboru. \\


{\bf Pozor:} {\em program pøi startu nenaèítá {\bf ¾ádná data}. Pro
pokraèování v práci na nìjakých datech je proto v¾dy nutné je nejprve
naèíst pomocí ,,File $\rightarrow$ Resume from..``}


\section{Úvodní pøíklad zapsaný pomocí pøíkazù}

Bez dal¹ího komentáøe je zde seznam pøíkazù, kterými je mo¾né vytvoøit 
a spoèítat vý¹e popsaný úvodní pøíklad. Ètenáø jej jistì vyu¾ije k
samostudiu poté, co se pozdìji podrobnìji seznámí s pøíkazy programu uFEM.

\begin{verbatim}
!* Vlastnosti modelu:
et,1,2                  !* typ konecneho prvku
rs,1,2                  !* typ konstant konecneho prvku
r,height,1,0.1          !* tloustka prvku
mat,1,1                 !* typ materialu
mp,ex,1,27e9            !* modul pruznosti
mp,prxy,1,0.2           !* poissonuv soucinitel

!* Geometrie modelu:
k,1, 0,0                !* body 1..6
k,2, 2,0
k,3, 4,0
k,4, 0,2
k,5, 2,2
k,6, 4,2
a,1, 1,2,5,4            !* plocha 1
a,2, 2,3,6,5            !* plocha 2

!* Sit konecnych prvku:
mesh                    !* sit konecnych prvku

!* Podpory:
nsel,s,loc,x,0          !* vyber uzlu pro podpory
nsel,add,loc,x,4
d,all,ux                !* zadani podpor ve smeru x
d,all,uy                !* zadani podpor ve smeru y
nsel,all                !* opetovny vyber vsech uzlu

!* Zatizeni:
nsel,s,loc,x,2
nsel,r,loc,y,2          !* vyber uzlu pro zadani sily
f,all,fy,-10e3          !* zadani sily
nsel,all                !* opetovny vyber vsech uzlu

!* Ulozeni modelu
save                    !* ulozi se do souboru "femfile.db"

!* Vypocet a vysledky:
solve                   !* provedeni vypoctu
pldef                   !* vykresleni deformovaneho tvaru
ples,s_x                !* vykresleni prubehu napeti sx
\end{verbatim}



